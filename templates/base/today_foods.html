{% extends 'base.html' %}

{% block title %}｜ホーム{% endblock %}
{% block content %}

<!-- header-bar -->
<div class="header-bar">
  <div>
    <h1>ようこそ、{{ request.user | title }}</h1> 
    <h3 style="margin: 0;">
      今日は{% now "F" %}{% now "j" %}日({% now "l" %})
      、合計カロリーは<span style="color: #333;">{{ttl_kcal}}</span>です！
    </h3>
  </div>

  {% if request.user.is_authenticated %}
    <a href="{% url 'logout' %}" class="logout"><i class="fas fa-sign-out-alt"></i>Logout</a>
  {% else %}
    <a href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i>Login</a>
  {% endif %}
</div>
<!-- ///header-bar -->

<div class="body-container">
  <!-- body-header-bar -->
  <div class="body-header">
    <div class="body-header-title">
      <div class="body-header-left">
        <h1>今日食べたもの</h1>
        <div class="links">
          <a href="{% url 'all_foods' %}">一覧</a>
          <a href="{% url 'target' %}">目標設定</a>
          <a href="{% url 'latest_blogs' %}">ブログ</a>
          <a href="{% url 'user_page' user.id %}">マイページ</a>
        </div>
      </div>
      <div class="body-header-right">
        <a href="{% url 'food-create' %}"><i class="fas fa-plus"></i></a>
      </div>
    </div>
  </div>
  <!-- ///body-header-bar -->
  
  <!-- table -->
  <div class="food-items-wrapper">
    <table>
      <tr class="table-header">
        <th class="align-left">食べもの</th>
        <th>kcal</th>
        <th>P</th>
        <th>F</th>
        <th>C</th>
        <!-- <th>日付</th> -->
        <th>カテゴリ</th>
      </tr>
      {% if user_foods %}
        {% for food in user_breakfast_list %}
          <tr>
            <td class="align-left">{{ food.name }}</td>
            <td>{{ food.kcal }}</td>
            <td>{{ food.protein }}</td>
            <td>{{ food.fat }}</td>
            <td>{{ food.carb }}</td>
            <!-- <td>{{ food.eaten_date }}</td> -->
            <td>{{ food.category }}</td>
            <td><a href="{% url 'food-update' food.id %}"><i class="far fa-edit"></i></a></td>
            <td><a href="{% url 'food-delete' food.id %}"><i class="far fa-trash-alt"></i></a></td>
          </tr>
        {% endfor %}

        {% for food in user_lunch_list %}
          <tr>
            <td class="align-left">{{ food.name }}</td>
            <td>{{ food.kcal }}</td>
            <td>{{ food.protein }}</td>
            <td>{{ food.fat }}</td>
            <td>{{ food.carb }}</td>
            <!-- <td>{{ food.eaten_date }}</td> -->
            <td>{{ food.category }}</td>
            <td><a href="{% url 'food-update' food.id %}"><i class="far fa-edit"></i></a></td>
            <td><a href="{% url 'food-delete' food.id %}"><i class="far fa-trash-alt"></i></a></td>
          </tr>
        {% endfor %}

        {% for food in user_dinner_list %}
          <tr>
            <td class="align-left">{{ food.name }}</td>
            <td>{{ food.kcal }}</td>
            <td>{{ food.protein }}</td>
            <td>{{ food.fat }}</td>
            <td>{{ food.carb }}</td>
            <!-- <td>{{ food.eaten_date }}</td> -->
            <td>{{ food.category }}</td>
            <td><a href="{% url 'food-update' food.id %}"><i class="far fa-edit"></i></a></td>
            <td><a href="{% url 'food-delete' food.id %}"><i class="far fa-trash-alt"></i></a></td>
          </tr>
        {% endfor %}

        {% for food in user_snack_list %}
          <tr>
            <td class="align-left">{{ food.name }}</td>
            <td>{{ food.kcal }}</td>
            <td>{{ food.protein }}</td>
            <td>{{ food.fat }}</td>
            <td>{{ food.carb }}</td>
            <td>{{ food.category }}</td>
            <td><a href="{% url 'food-update' food.id %}"><i class="far fa-edit"></i></a></td>
            <td><a href="{% url 'food-delete' food.id %}"><i class="far fa-trash-alt"></i></a></td>
          </tr>
        {% endfor %}

        <!-- {% for food in user_foods %}
          <tr>
            <td class="align-left">{{ food.name }}</td>
            <td>{{ food.kcal }}</td>
            <td>{{ food.protein }}</td>
            <td>{{ food.fat }}</td>
            <td>{{ food.carb }}</td>
            <td>{{ food.eaten_date }}</td>
            <td>{{ food.category }}</td>
            <td><a href="{% url 'food-update' food.id %}"><i class="far fa-edit"></i></a></td>
            <td><a href="{% url 'food-delete' food.id %}"><i class="far fa-trash-alt"></i></a></td>
          </tr>
        {% endfor %} -->
      {% else %}
        <td colspan="8" style="padding: 20px;">｜今日はまだ何も食べていません。｜</td>
      {% endif %}

      <!-- 合計と目標 -->
      <tr>
        <th class="align-left total">合計</th>
        <th class="total">{{ ttl_kcal }}</th>
        <th class="total">{{ ttl_protein }}</th>
        <th class="total">{{ ttl_fat }}</th>
        <th class="total">{{ ttl_carb }}</th>
      </tr>
      {% if target %}
        <tr>
          <th class="align-left">目標</th>
          <th>{{ target.kcal }}</th>
          <th>{{ target.protein }}</th>
          <th>{{ target.fat }}</th>
          <th>{{ target.carb }}</th>
        </tr>
      {% else %}
        <tr>
          <th class="align-left">目標</th>
          <th>0</th>
          <th>0</th>
          <th>0</th>
          <th>0</th>
        </tr>
      {% endif %}
    </table>
  </div>
  <!-- ///table -->
</div>


<!-- {{ kcal.kcal__sum }}
  {{ protein.protein__sum }} -->
<!-- <p>目標は1960kcal, P130, F54.5, C237だよ</p> -->
{% endblock %}